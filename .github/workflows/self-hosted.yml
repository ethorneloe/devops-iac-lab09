name: Self Hosted Runner Demo

on:
  workflow_dispatch:

jobs:
  run-on-self-hosted:
    runs-on: [self-hosted, linux, x64]

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Run demo script
        run: ./scripts/demo-script.sh

      - name: Check for custom tools
        run: |
          echo ""
          echo "==================================="
          echo "Checking for Custom Tools"
          echo "==================================="
          echo ""

          # Check for Terraform
          if command -v terraform &> /dev/null; then
            echo "✓ Terraform found:"
            terraform version
          else
            echo "✗ Terraform not installed"
          fi
          echo ""

          # Check for Azure CLI
          if command -v az &> /dev/null; then
            echo "✓ Azure CLI found:"
            az version --output table 2>/dev/null || az version
          else
            echo "✗ Azure CLI not installed"
          fi
          echo ""

          # Check for AWS CLI
          if command -v aws &> /dev/null; then
            echo "✓ AWS CLI found:"
            aws --version
          else
            echo "✗ AWS CLI not installed"
          fi
          echo ""

          # Check for Docker
          if command -v docker &> /dev/null; then
            echo "✓ Docker found:"
            docker --version
          else
            echo "✗ Docker not installed"
          fi
